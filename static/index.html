<!DOCTYPE html>
<html lang="en">
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Jindle</title>
      <script src="epub.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.5/jszip.min.js"></script>
      <script>
          const book = ePub("https://s3.amazonaws.com/epubjs/books/moby-dick/OPS/package.opf");
          const rendition = book.renderTo("reader", {
              manager: "continuous",
              flow: "paginated",
              width: "100%", 
              height: "100%" 
          });
          rendition.themes.default({
              "p": { 
                  "font-size": "1.3rem !important",
                  "font-smooth": "never !important",
                  "font-weight": "bold !important"
              },
              "h1": { 
                  "font-family": "sans-serif",
                  "font-smooth": "never !important",
                  "font-weight": "bold !important"
              } 
          });
          const displayed = rendition.display("chapter_001.xhtml");
          displayed.then(() => {
              window.pageCount = 0;
              window.ebookDisplayed = true;
          });
          const onKeyUp = (e) => {
              if((e.keyCode || e.which) == 37) {
                  rendition.prev().then(() => --window.pageCount);
              }
              if((e.keyCode || e.which) == 39) {
                  rendition.next().then(() => ++window.pageCount);
              }
          };
          rendition.on("keyup", onKeyUp);
          document.addEventListener("keyup", onKeyUp);
      </script>
      <style>
          html, body {
              height: 100%;
              width: 100%;
              margin: 0;
              padding: 0;
          }
          #reader {
              height: 100%;
              width: 100%;
          }
      </style>
    </head>
    <body>
          <div id="reader"></div>
    </body>
</html>
